"use strict";(globalThis.webpackChunkweb_advisor_theme_builder=globalThis.webpackChunkweb_advisor_theme_builder||[]).push([[715],{96:(e,t,l)=>{l.r(t);var a=l(997),o=l(715),s=l(427),n=l(143),r=l(87),i=l(428),d=l.n(i),u=l(723),c=l(790);(0,a.registerBlockType)("web-advisor/latest-blog-posts",{title:(0,u.__)("Latest Blog Posts (Web Advisor)","web-advisor"),icon:"slides",category:"widgets",attributes:{slidesDesktop:{type:"number",default:3},slidesTablet:{type:"number",default:2},slidesMobile:{type:"number",default:1},autoplay:{type:"boolean",default:!0},loop:{type:"boolean",default:!0},margin:{type:"number",default:20},showNav:{type:"boolean",default:!0},showDots:{type:"boolean",default:!0},autoplayTimeout:{type:"number",default:4e3}},edit:({attributes:e,setAttributes:t})=>{const{slidesDesktop:l,slidesTablet:a,slidesMobile:i,autoplay:u,loop:p,margin:g,showNav:h,showDots:m,autoplayTimeout:b}=e,x=(0,o.useBlockProps)({className:"wa-latest-blog"}),y=(0,r.useRef)(null),[w,C]=(0,r.useState)([]),v=(0,n.useSelect)(e=>{try{return e("core").getEntityRecords("postType","post",{per_page:9,_embed:!0})}catch(e){return console.error("useSelect error",e),[]}},[]);(0,r.useEffect)(()=>{Array.isArray(v)&&v.length>0&&C(v)},[v]);const f=()=>{const e=d()(y.current);if(e.length&&"function"==typeof d().fn.owlCarousel)try{e.trigger("destroy.owl.carousel"),e.removeClass("owl-loaded"),e.find(".owl-stage-outer").children().unwrap();const t=w.length;e.owlCarousel({items:l,margin:g,loop:t>l&&p,autoplay:u,autoplayTimeout:b,nav:h,dots:m,navText:['<i class="material-icons">chevron_left</i>','<i class="material-icons">chevron_right</i>'],responsive:{0:{items:i},600:{items:a},991:{items:l}}})}catch(e){console.warn("OwlCarousel init error:",e)}};return(0,r.useEffect)(()=>{w.length>0&&setTimeout(f,500)},[w]),(0,c.jsxs)("div",{...x,children:[(0,c.jsx)(o.InspectorControls,{children:(0,c.jsxs)(s.PanelBody,{title:"Carousel Settings",initialOpen:!0,children:[(0,c.jsx)(s.RangeControl,{label:"Desktop Slides (â‰¥ 991px)",value:l,min:1,max:6,onChange:e=>t({slidesDesktop:e})}),(0,c.jsx)(s.RangeControl,{label:"Tablet Slides (â‰¤ 991px)",value:a,min:1,max:5,onChange:e=>t({slidesTablet:e})}),(0,c.jsx)(s.RangeControl,{label:"Mobile Slides (â‰¤ 600px)",value:i,min:1,max:3,onChange:e=>t({slidesMobile:e})}),(0,c.jsx)(s.RangeControl,{label:"Margin (px)",value:g,min:0,max:60,onChange:e=>t({margin:e})}),(0,c.jsx)(s.RangeControl,{label:"Autoplay Timeout (ms)",value:b,min:1e3,max:1e4,step:500,onChange:e=>t({autoplayTimeout:e})}),(0,c.jsx)(s.ToggleControl,{label:"Autoplay",checked:u,onChange:e=>t({autoplay:e})}),(0,c.jsx)(s.ToggleControl,{label:"Loop",checked:p,onChange:e=>t({loop:e})}),(0,c.jsx)(s.ToggleControl,{label:"Show Navigation",checked:h,onChange:e=>t({showNav:e})}),(0,c.jsx)(s.ToggleControl,{label:"Show Dots",checked:m,onChange:e=>t({showDots:e})}),(0,c.jsx)(s.Button,{variant:"primary",style:{marginTop:"10px"},onClick:()=>f(),children:"ðŸ”„ Refresh Carousel"})]})}),0===w.length&&(0,c.jsx)("p",{children:"Loading latest postsâ€¦"}),w.length>0&&(0,c.jsx)("div",{className:"wa-latest-carousel owl-carousel",ref:y,children:w.map(e=>{const t=e?._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"https://via.placeholder.com/800x500?text=No+Image",l=e?.title?.rendered||"Untitled",a=e?._embedded?.author?.[0]?.name||"Admin",o=new Date(e.date).toLocaleDateString();return(0,c.jsxs)("article",{className:"wa-blog-card",children:[(0,c.jsx)("img",{src:t,alt:l}),(0,c.jsxs)("div",{className:"wa-card-content",children:[(0,c.jsx)("h4",{dangerouslySetInnerHTML:{__html:l}}),(0,c.jsxs)("p",{className:"wa-meta",children:["ðŸ‘¤ ",a," Â  ðŸ—“ ",o]}),(0,c.jsx)("a",{className:"wa-readmore",href:e.link,target:"_blank",rel:"noopener noreferrer",children:"Read More â†’"})]})]},e.id)})})]})},save:()=>null})}}]);